Full ticket fields: map[aggregateprogress:map[progress:0 total:0] aggregatetimeestimate:<nil> aggregatetimeoriginalestimate:<nil> aggregatetimespent:<nil> archivedby:<nil> archiveddate:<nil> assignee:map[active:true avatarUrls:map[16x16:https://issues.redhat.com/secure/useravatar?size=xsmall&ownerId=JIRAUSER287315&avatarId=77800 24x24:https://issues.redhat.com/secure/useravatar?size=small&ownerId=JIRAUSER287315&avatarId=77800 32x32:https://issues.redhat.com/secure/useravatar?size=medium&ownerId=JIRAUSER287315&avatarId=77800 48x48:https://issues.redhat.com/secure/useravatar?ownerId=JIRAUSER287315&avatarId=77800] displayName:Asaf Ben Natan emailAddress:abennata@redhat.com key:JIRAUSER287315 name:rh-ee-abennata self:https://issues.redhat.com/rest/api/2/user?username=rh-ee-abennata timeZone:GMT] attachment:[] comment:map[comments:[map[author:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=16 24x24:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=24 32x32:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=32 48x48:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=48] displayName:Anton Ivanov emailAddress:anivanov@redhat.com key:anivanov-cp name:anivanov-cp self:https://issues.redhat.com/rest/api/2/user?username=anivanov-cp timeZone:GMT] body:Root cause:

tls.Config.RootCA is not an incremental setting. If it is nil - tls reads the system RootCA pool. If it is non-NIL it uses ONLY the CAs in the specified pool.

Client config always sets the CA used to issue its certificate as the RootCA for the pool. By design that is only enrolment and agent certs, not server certs. From there on, servers with certs issued by a different CA will fail TLS setup.

Proposed solutions:
 # Add a Config for server CAs (may contain the same cert)
 # Install server CAs into device main pool (most other products do this as it is more reliable). created:2025-02-14T09:54:09.428+0000 id:26598810 self:https://issues.redhat.com/rest/api/2/issue/16670020/comment/26598810 updateAuthor:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=16 24x24:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=24 32x32:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=32 48x48:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=48] displayName:Anton Ivanov emailAddress:anivanov@redhat.com key:anivanov-cp name:anivanov-cp self:https://issues.redhat.com/rest/api/2/user?username=anivanov-cp timeZone:GMT] updated:2025-02-14T09:54:09.428+0000] map[author:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] body:AI has created a pull request to address this issue: https://github.com/flightctl/flightctl/pull/1344 created:2025-07-08T13:48:56.819+0000 id:27556785 self:https://issues.redhat.com/rest/api/2/issue/16670020/comment/27556785 updateAuthor:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] updated:2025-07-08T13:48:56.819+0000] map[author:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] body:AI has created a pull request to address this issue: https://github.com/flightctl/flightctl/pull/1348 created:2025-07-09T06:52:28.780+0000 id:27563178 self:https://issues.redhat.com/rest/api/2/issue/16670020/comment/27563178 updateAuthor:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] updated:2025-07-09T06:52:28.780+0000] map[author:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] body:AI has created a pull request to address this issue: https://github.com/flightctl/flightctl/pull/1349 created:2025-07-09T08:06:41.066+0000 id:27563756 self:https://issues.redhat.com/rest/api/2/issue/16670020/comment/27563756 updateAuthor:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] updated:2025-07-09T08:06:41.066+0000] map[author:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] body:AI has created a pull request to address this issue: https://github.com/asafbennatan/flightctl/pull/1 created:2025-07-10T09:40:19.781+0000 id:27573621 self:https://issues.redhat.com/rest/api/2/issue/16670020/comment/27573621 updateAuthor:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT] updated:2025-07-10T09:40:19.781+0000]] maxResults:5 startAt:0 total:5] components:[map[id:12402208 name:FlightCtl-Core self:https://issues.redhat.com/rest/api/2/component/12402208]] created:2025-02-14T09:50:09.564+0000 creator:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=16 24x24:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=24 32x32:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=32 48x48:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=48] displayName:Anton Ivanov emailAddress:anivanov@redhat.com key:anivanov-cp name:anivanov-cp self:https://issues.redhat.com/rest/api/2/user?username=anivanov-cp timeZone:GMT] customfield_12310183:<nil> customfield_12310213:<nil> customfield_12310220:[https://github.com/asafbennatan/flightctl/pulls] customfield_12310243:<nil> customfield_12310840:9223372036854775807 customfield_12310940:<nil> customfield_12311140:<nil> customfield_12311840:<nil> customfield_12311940:1|hy6rtb: customfield_12313140:<nil> customfield_12313240:<nil> customfield_12313440:0.0 customfield_12313441: customfield_12313941:<nil> customfield_12313942:<nil> customfield_12314040:<nil> customfield_12314740:{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7bc66a0c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@369c049[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@ce5e8ec[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@41430ab1[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@59a2e218[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4665b5d5[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65e4977d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3c2b0ff2[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@72d7884d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@197740df[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@586973f3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3cd9a393[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={"cachedValue":{"errors":[],"configErrors":[],"summary":{"pullrequest":{"overall":{"count":0,"lastUpdated":null,"stateCount":0,"state":"OPEN","details":{"openCount":0,"mergedCount":0,"declinedCount":0,"total":0},"open":true},"byInstanceType":{}},"build":{"overall":{"count":0,"lastUpdated":null,"failedBuildCount":0,"successfulBuildCount":0,"unknownBuildCount":0},"byInstanceType":{}},"review":{"overall":{"count":0,"lastUpdated":null,"stateCount":0,"state":null,"dueDate":null,"overDue":false,"completed":false},"byInstanceType":{}},"deployment-environment":{"overall":{"count":0,"lastUpdated":null,"topEnvironments":[],"showProjects":false,"successfulCount":0},"byInstanceType":{}},"repository":{"overall":{"count":0,"lastUpdated":null},"byInstanceType":{}},"branch":{"overall":{"count":0,"lastUpdated":null},"byInstanceType":{}}}},"isStale":false}} customfield_12315542:<nil> customfield_12315740:<nil> customfield_12315948:map[active:true avatarUrls:map[16x16:https://issues.redhat.com/secure/useravatar?size=xsmall&ownerId=JIRAUSER179203&avatarId=38631 24x24:https://issues.redhat.com/secure/useravatar?size=small&ownerId=JIRAUSER179203&avatarId=38631 32x32:https://issues.redhat.com/secure/useravatar?size=medium&ownerId=JIRAUSER179203&avatarId=38631 48x48:https://issues.redhat.com/secure/useravatar?ownerId=JIRAUSER179203&avatarId=38631] displayName:Silvia Serafini emailAddress:sserafin@redhat.com key:JIRAUSER179203 name:sserafin@redhat.com self:https://issues.redhat.com/rest/api/2/user?username=sserafin%40redhat.com timeZone:GMT] customfield_12315950:[map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=16 24x24:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=24 32x32:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=32 48x48:https://www.gravatar.com/avatar/32a84a92f1f3b89c2074df2b2995df31?d=mm&s=48] displayName:wg-jira-ai-issue-solver wg-jira-ai-issue-solver emailAddress:wg-jira-ai-issue-solver@redhat.com key:JIRAUSER287667 name:wg-jira-ai-issue-solver self:https://issues.redhat.com/rest/api/2/user?username=wg-jira-ai-issue-solver timeZone:GMT]] customfield_12316142:map[disabled:false id:26751 self:https://issues.redhat.com/rest/api/2/customFieldOption/26751 value:Important] customfield_12316542:map[disabled:false id:14655 self:https://issues.redhat.com/rest/api/2/customFieldOption/14655 value:False] customfield_12316543:map[disabled:false id:14657 self:https://issues.redhat.com/rest/api/2/customFieldOption/14657 value:False] customfield_12316544:None customfield_12316840:<nil> customfield_12316841:<nil> customfield_12317313:<nil> customfield_12318341:<nil> customfield_12319040:<nil> customfield_12319742:<nil> customfield_12319743:<nil> customfield_12320842:<nil> customfield_12320844:<nil> customfield_12320850:<nil> customfield_12320940:<nil> customfield_12320946:map[disabled:false id:27705 self:https://issues.redhat.com/rest/api/2/customFieldOption/27705 value:False] customfield_12320947:[map[disabled:false id:27714 self:https://issues.redhat.com/rest/api/2/customFieldOption/27714 value:Unclassified]] customfield_12321140:<nil> customfield_12321240:<nil> customfield_12323640:<nil> customfield_12323641:<nil> customfield_12323642:<nil> customfield_12323643:<nil> customfield_12323644:<nil> customfield_12323645:<nil> customfield_12323646:<nil> customfield_12324540:0.0 customfield_12324753:<nil> customfield_12325240:<nil> customfield_12325241:<nil> customfield_12325242:[] customfield_12325243:<nil> customfield_12325340:<nil> customfield_12325341:<nil> customfield_12325342:<nil> customfield_12325343:<nil> customfield_12325440:<nil> customfield_12325441:<nil> customfield_12325442:<nil> customfield_12325840:<nil> description:*Description of the problem:*

All client config in flightctl assumes that the server certificate is issued by the same authority which is used for issuing client certificates and mTLS authentication.

*How reproducible:*

Always

*Steps to reproduce:*

 
 # Try to load a cert issued by a different authority

*Actual results:*

mTLS Fail

*Expected results:*

mTLS Success duedate:<nil> environment:<nil> fixVersions:[] issuelinks:[] issuetype:map[avatarId:13263 description:A problem that impairs or prevents the functions of the product. iconUrl:https://issues.redhat.com/secure/viewavatar?size=xsmall&avatarId=13263&avatarType=issuetype id:1 name:Bug self:https://issues.redhat.com/rest/api/2/issuetype/1 subtask:false] labels:[] lastViewed:2025-07-10T09:15:01.832+0000 priority:map[iconUrl:https://issues.redhat.com/images/icons/priorities/trivial.svg id:10300 name:Undefined self:https://issues.redhat.com/rest/api/2/priority/10300] progress:map[progress:0 total:0] project:map[avatarUrls:map[16x16:https://issues.redhat.com/secure/projectavatar?size=xsmall&avatarId=17263 24x24:https://issues.redhat.com/secure/projectavatar?size=small&avatarId=17263 32x32:https://issues.redhat.com/secure/projectavatar?size=medium&avatarId=17263 48x48:https://issues.redhat.com/secure/projectavatar?avatarId=17263] id:12334322 key:EDM name:Flight Control projectTypeKey:software self:https://issues.redhat.com/rest/api/2/project/12334322] reporter:map[active:true avatarUrls:map[16x16:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=16 24x24:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=24 32x32:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=32 48x48:https://www.gravatar.com/avatar/9c844667e9461d0b98d2cb3de894605f?d=mm&s=48] displayName:Anton Ivanov emailAddress:anivanov@redhat.com key:anivanov-cp name:anivanov-cp self:https://issues.redhat.com/rest/api/2/user?username=anivanov-cp timeZone:GMT] resolution:<nil> resolutiondate:<nil> status:map[description:Bugzilla Status iconUrl:https://issues.redhat.com/images/icons/subtask.gif id:14454 name:MODIFIED self:https://issues.redhat.com/rest/api/2/status/14454 statusCategory:map[colorName:inprogress id:4 key:indeterminate name:In Progress self:https://issues.redhat.com/rest/api/2/statuscategory/4]] subtasks:[] summary:Incorrect configuration for Client/Agent TLS timeestimate:<nil> timeoriginalestimate:<nil> timespent:<nil> timetracking:map[] updated:2025-07-10T13:23:54.419+0000 versions:[] votes:map[hasVoted:false self:https://issues.redhat.com/rest/api/2/issue/EDM-1169/votes votes:0] watches:map[isWatching:true self:https://issues.redhat.com/rest/api/2/issue/EDM-1169/watchers watchCount:3] worklog:map[maxResults:20 startAt:0 total:0 worklogs:[]] workratio:-1]
